import time
from flask import Blueprint, jsonify, request
from api.helpers.metrics import record_response_time

attachement_bp = Blueprint("attachement", __name__, url_prefix="/integrator")

@attachement_bp.route("/attachement", methods=["PUT"])
def handle_attachement():
    start_time = time.time()

    # Exemple logique (mock)
    content = request.get_json(silent=True) or {}
    result = {"message": "Attachement traité", "input": content}

    # Calcul du temps de réponse
    duration_ms = (time.time() - start_time) * 1000
    record_response_time(duration_ms)

    return jsonify(result), 200
