from flask import Blueprint, jsonify
from api.helpers.metrics import get_system_metrics, get_average_response_time

health_bp = Blueprint("health", __name__)

@health_bp.route("/health", methods=["GET"])
def health():
    system = get_system_metrics()
    avg_time = get_average_response_time()

    data = {
        "status": "ok",
        "system": system,
        "average_response_time_ms": avg_time,
        "monitored_endpoint": "PUT /integrator/attachement"
    }
    return jsonify(data), 200
